# FlaMinGo TimesFM Finetuning Configuration
# Copy this to .env and adjust parameters as needed

# =============================================================================
# MODEL CONFIGURATION
# =============================================================================

# TimesFM Model Configuration
MODEL_SIZE=200m
TIMESFM_CONTEXT_LEN=512
TIMESFM_HORIZON_LEN=128
TIMESFM_INPUT_PATCH_LEN=32
TIMESFM_OUTPUT_PATCH_LEN=128
TIMESFM_NUM_HEADS=16
TIMESFM_NUM_LAYERS=20

# Model Paths
MODEL_SAVE_PATH=finetuned_flamingo_stock_model.pth
PRETRAINED_MODEL_PATH=
RESULTS_DIR=finetuning_results
PLOTS_DIR=finetuning_plots

# =============================================================================
# DATA CONFIGURATION
# =============================================================================

# Training Data Settings
CONTEXT_LENGTH=512
PREDICTION_HORIZON=60
SEQUENCE_STRIDE=15
USE_NORMALIZED_PRICES=true
INCLUDE_INDICATORS=true

# Classification Settings
CLASSIFICATION_THRESHOLD_PCT=0.05
FORECAST_CLASSIFICATION=true

# Target Dates (comma-separated)
TARGET_DATES=2025-05-19,2025-05-20,2025-05-21,2025-05-22,2025-05-23,2025-05-26,2025-05-27,2025-05-28,2025-05-29,2025-05-30,2025-06-02,2025-06-03,2025-06-04,2025-06-05,2025-06-06,2025-06-09,2025-06-10,2025-06-11,2025-06-12,2025-06-13,2025-06-16,2025-06-17,2025-06-18,2025-06-19,2025-06-20

# =============================================================================
# TRAINING CONFIGURATION
# =============================================================================

# Training Hyperparameters
BATCH_SIZE=16
LEARNING_RATE=0.0001
NUM_EPOCHS=50
OPTIMIZER_TYPE=adam
WEIGHT_DECAY=0.00001

# Data Split Ratios
TRAIN_RATIO=0.8
VAL_RATIO=0.1
TEST_RATIO=0.1

# Training Control
EARLY_STOPPING_PATIENCE=10
SAVE_BEST_MODEL=true
CHECKPOINT_FREQUENCY=10

# =============================================================================
# DEVICE CONFIGURATION
# =============================================================================

# Compute Settings
DEVICE=auto
USE_MIXED_PRECISION=false
NUM_WORKERS=4

# =============================================================================
# LOGGING AND OUTPUT
# =============================================================================

# Logging
LOG_LEVEL=INFO
LOG_FILE=finetuning.log
TENSORBOARD_LOG_DIR=runs/flamingo_finetuning

# Visualization
PLOT_TRAINING_HISTORY=true
PLOT_CONFUSION_MATRIX=true
PLOT_PREDICTIONS=true
SAVE_PREDICTIONS=true

# =============================================================================
# ADVANCED SETTINGS
# =============================================================================

# Loss Weighting
FORECAST_LOSS_WEIGHT=1.0
CLASSIFICATION_LOSS_WEIGHT=0.5

# Regularization
DROPOUT_RATE=0.1
L2_REGULARIZATION=0.00001

# Data Augmentation
USE_DATA_AUGMENTATION=false
NOISE_LEVEL=0.01
TIME_WARPING=false

# =============================================================================
# EVALUATION SETTINGS
# =============================================================================

# Evaluation Metrics
CALCULATE_DIRECTIONAL_ACCURACY=true
CALCULATE_SHARPE_RATIO=true
CALCULATE_MAX_DRAWDOWN=true

# Backtesting
RUN_BACKTEST=true
INITIAL_CAPITAL=100000
TRANSACTION_COST=0.001

# =============================================================================
# HUGGING FACE SETTINGS (if using HF models)
# =============================================================================

# Hugging Face Configuration
HUGGINGFACE_HUB_TOKEN=
HF_MODEL_REPO=PartAI/FlaMinGo-timesfm
USE_HF_CACHE=true
HF_CACHE_DIR=~/.cache/huggingface

# =============================================================================
# EXAMPLE CONFIGURATIONS FOR DIFFERENT USE CASES
# =============================================================================

# HIGH-FREQUENCY TRADING (1-minute data, short predictions):
# MODEL_SIZE=200m
# TIMESFM_CONTEXT_LEN=512
# TIMESFM_INPUT_PATCH_LEN=16
# TIMESFM_NUM_HEADS=8
# TIMESFM_HORIZON_LEN=64
# CONTEXT_LENGTH=400
# PREDICTION_HORIZON=30
# SEQUENCE_STRIDE=5

# INTRADAY TRADING (5-15 minute data, 1-4 hour predictions):
# MODEL_SIZE=500m
# TIMESFM_CONTEXT_LEN=1024
# TIMESFM_INPUT_PATCH_LEN=32
# TIMESFM_NUM_HEADS=16
# TIMESFM_HORIZON_LEN=128
# CONTEXT_LENGTH=800
# PREDICTION_HORIZON=60
# SEQUENCE_STRIDE=15

# SWING TRADING (hourly data, daily predictions):
# MODEL_SIZE=500m
# TIMESFM_CONTEXT_LEN=2048
# TIMESFM_INPUT_PATCH_LEN=64
# TIMESFM_NUM_HEADS=24
# TIMESFM_HORIZON_LEN=256
# CONTEXT_LENGTH=1600
# PREDICTION_HORIZON=240
# SEQUENCE_STRIDE=60

# MAXIMUM CONTEXT (TimesFM 2.0 full capability):
# MODEL_SIZE=500m
# TIMESFM_CONTEXT_LEN=2048
# CONTEXT_LENGTH=2000
# TIMESFM_INPUT_PATCH_LEN=32

# VOLATILE MARKETS (high noise, need robustness):
# CLASSIFICATION_THRESHOLD_PCT=0.1
# DROPOUT_RATE=0.2
# USE_DATA_AUGMENTATION=true
# NOISE_LEVEL=0.02

# STABLE MARKETS (low noise, need precision):
# CLASSIFICATION_THRESHOLD_PCT=0.02
# DROPOUT_RATE=0.05
# L2_REGULARIZATION=0.000001
